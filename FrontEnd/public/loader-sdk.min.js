!function(e){"use strict";var a=".nanobar{width:100%;height:4px;z-index:9999;top:0}.bar{width:0;height:100%;transition:height .3s;background:#000}";function d(e,n){e.classList?e.classList.add(n):e.className+=" "+n}function n(e){e=e||{};var n,i=document.createElement("div"),o={el:i,go:function(e){n(e),100===e&&t()}};function r(e){i.removeChild(e)}function t(){var e=function(n){var i=document.createElement("div"),o=0,r=0,t=0,e={el:i,go:f};function a(){var e=o-r;e<.1&&-.1<e?(s(r),t=0,100===o&&(i.style.height=0,setTimeout(function(){n(i)},300))):(s(o-e/4),setTimeout(f,16))}function s(e){o=e,i.style.width=o+"%"}function f(e){0<=e?(r=e,t||(t=1,a())):t&&a()}return d(i,"bar"),e}(r);i.appendChild(e.el),n=e.go}return function(){var e=document.getElementById("nanobarcss");if(null===e){if((e=document.createElement("style")).type="text/css",e.id="nanobarcss",document.head.insertBefore(e,document.head.firstChild),!e.styleSheet)return e.appendChild(document.createTextNode(a));e.styleSheet.cssText=a}}(),d(i,"nanobar"),e.id&&(i.id=e.id),e.classname&&d(i,e.classname),e.target?(i.style.position="relative",e.target.insertBefore(i,e.target.firstChild)):(i.style.position="fixed",document.getElementsByTagName("body")[0].appendChild(i)),t(),o}"object"==typeof exports?module.exports=n:"function"==typeof define&&define.amd?define([],function(){return n}):e.Nanobar=n}(this),function(){"use strict";try{var s,g=document.head||document.getElementsByTagName("head")[0],f=null,u=!1,d=!1,l=!1,c=!1,r=!1,p={appID:"",appSecret:""},t=function(e){return e.toDateString()+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)},h=new function(){var i=!1,o=function(e,n,i){r?console.log(t(new Date)+" | RBW-SDK | Loader     | ["+e+"] :: "+n):console.log("%c "+t(new Date)+" | RBW-SDK | Loader     | ["+e+"] :: "+n,"color:"+{info:"black",debug:"blue",success:"green",warning:"orange",error:"red"}[i])};this.info=function(e,n){o(e,n,"info")},this.error=function(e,n){o(e,n,"error")},this.success=function(e,n){o(e,n,"success")},this.warning=function(e,n){o(e,n,"warning")},this.debug=function(e,n){i&&o(e,n,"debug")},this.setLevelToVerbose=function(e){i=e}};("Microsoft Internet Explorer"===navigator.appName||navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/rv 11/))&&(window.Promise=window.ES6Promise,r=!0,h.warning("Initialize ","Internet Explorer 11 detected. You need to load ES6-shim in order to work (IE11-compat)")),(h.info("Initialize ","Starting Rainbow SDK for Web loader..."),h.info("Initialize ","---------------------------------------------"),h.info("Initialize ","Try to load needed stuff..."),new Promise(function(e,n){function i(e,l,c){return new Promise(function(n,i){try{var s=e.length,f=0,d=0;0===s?(h.debug("Loading    ","Nothing to load. Go to next step!"),n()):(h.debug("Loading    ","Preparing for loading "+s+" files..."),e.forEach(function(e){var o,r,t,a;c?(t=e,a=l,h.debug("Loading    ","Try to load script "+t),new Promise(function(e,n){try{var i=document.createElement("script");i.type="text/javascript",i.async=a,i.onerror=function(e){h.error("Loading    ","Can't load script file "+t+"(loading-error)"),n(e)},i.onload=function(){h.success("Loading    ","Loaded script file "+t),e()},g.appendChild(i);var o=t;u&&(o+="?cache="+(new Date).getTime()),i.src=o}catch(e){h.error("Loading    ","Can't load script file "+t+" (loading-error)"),n(e)}})).then(function(){f++,h.debug("Loading    ",f+" file(s) loaded"),s===f?n():s===f+d&&i()}).catch(function(e){d++,h.error("Loading    ",d+" file(s) not loaded"),s===f+d&&i(e)}):(o=e,r=l,h.debug("Loading    ","Try to load CSS "+o),new Promise(function(e,n){try{var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.async=r,i.onerror=function(e){h.error("Loading    ","Can't load css file "+o+" (loading-error)"),n(e)},i.onload=function(){h.success("Loading    ","Loaded css file "+o),e()},g.appendChild(i),i.href=o}catch(e){h.error("Loading    ","Error when loading css file (loading-error)"),n(e)}})).then(function(){f++,h.debug("Loading    ",f+" file(s) loaded"),s===f?n():s===f+d&&i()}).catch(function(e){d++,h.error("Loading    ",d+" file(s) not loaded"),s===f+d&&i(e)})}))}catch(e){i(e)}})}function o(){return h.debug("Loading    ","Preparing for bootstrapping application..."),i=f.app.bootstrap,new Promise(function(e,n){try{angular.bootstrap(document,[i]),e()}catch(e){n(e)}});var i}function r(){return h.debug("Loading    ","Preparing initializing SDK..."),new Promise(function(e,n){window.rainbowSDK?(h.info("Information","Global window.rainbowSDK variable set"),window.rainbowSDK.setVerboseLog(c),window.rainbowSDK.useAngularEvents(l),window.rainbowSDK.setKeyFromConfig(p.appID,p.appSecret),window.rainbowSDK.hasBeenLaunchedFromConfig(!0),e()):(h.warning("No global parameter rainbowSDK (no-global)"),n())})}function t(){return h.debug("Loading    ","Preparing reading application key..."),new Promise(function(e,n){var i=f.app;0===i.key.appID.length?h.warning("Config     ","Empty property 'appID' in config file. Use default (no-appID)"):(p.appID=i.key.appID,p.appSecret=i.key.appSecret,h.info("Config     ","Use Application ID "+p.appID)),e()})}function a(e){d&&s&&s.go(e)}new Promise(function(n,i){try{var e=document.getElementsByTagName("script"),o=null;if(e)for(var r in e)if({}.hasOwnProperty.call(e,r)){var t=e[r];t.dataset&&t.dataset.main&&(o=t.dataset.main,h.info("Loading    ","Use config file "+o))}if(o){var a=new XMLHttpRequest;a.onload=function(e){200!==a.status?(h.error("Loading    ","Can't load the config file: "+a.status+" "+a.statusText+" (file-not-found)"),i(a.statusText)):(f=a.response,h.info("Loading    ","Received a config file of type... "+typeof f),"string"==typeof f&&(h.warning("Loading    ","Convert data to JSON..."),f=JSON.parse(f)),f&&function(){if(!f.hasOwnProperty("settings"))return h.error("Config     ","Missing property 'settings' in config file. (incomplete-file)"),!1;if(!f.hasOwnProperty("libraries"))return h.error("Config     ","Missing property 'libraries' in config file. (incomplete-file)"),!1;if(!f.libraries.hasOwnProperty("prerequisites"))return h.error("Config     ","Missing property 'before' in config file. (incomplete-file)"),!1;if(!f.libraries.hasOwnProperty("sdk"))return h.error("Config     ","Missing property 'sdk' in config file. (incomplete-file)"),!1;if(!f.libraries.sdk.hasOwnProperty("default"))return h.error("Config     ","Missing property 'default' in config file. (incomplete-file)"),!1;if(!f.hasOwnProperty("app"))return h.error("Config     ","Missing property 'app' in config file. (incomplete-file)"),!1;if(!f.app.hasOwnProperty("key"))return h.error("Config     ","Missing property 'key' in config file. (incomplete-file)"),!1;if(!f.app.key.hasOwnProperty("appID"))return h.error("Config     ","Missing property 'appID' in config file. (incomplete-file)"),!1;if(!f.app.key.hasOwnProperty("appSecret"))return h.error("Config     ","Missing property 'appSecret' in config file. (incomplete-file)"),!1;var e=f.libraries.sdk.default;return e in f.libraries.sdk||(h.error("Config     ","Missing property '"+e+"' in config file. (incomplete-file)"),!1)}()?(h.success("Loading    ","The config file is valid"),n()):(h.error("Loading    ","No valid config file (no-valid-file)"),i()))},a.onerror=function(e){i(e)},a.open("GET",o,!0),a.responseType="json",h.info("Loading    ","Load config file "+o),a.send()}else h.error("Loading    ","Config file can't be found. Did you forget to add the data-main attribute (file-not-found) ?"),i()}catch(e){h.info("Loading    ","Error when loading the config file (error-loading)"),console.log("ERR",e),i(e)}}).then(function(){return new Promise(function(e,n){var i=f.settings;if(void 0===i.verboseLog)h.warning("Config     ","Missing 'verboseLog' property in config file. Use default (no-verbose-log)"),h.setLevelToVerbose(!1),c=!1;else{var o=(c=i.verboseLog)?"YES":"NO";h.info("Config     ","Set verbose log "+o),h.setLevelToVerbose(c)}void 0===i.disableCache?(h.warning("Config     ","Missing 'disableCache' property in config file. Use default (use-cache)"),u=!1):(o=(u=i.disableCache)?"YES":"NO",h.info("Config     ","Force to reload script "+o)),void 0===i.enableLoader?(h.warning("Config     ","Missing 'enableLoader' property in config file. Use default (no-loader)"),d=!1):(o=(d=i.enableLoader)?"YES":"NO",h.info("Config     ","Display loader "+o)),void 0===i.useAngularEvents?(h.warning("Config     ","Missing 'useAngularEvents' property in config file. Use default (no-angular-events)"),l=!1):(o=(l=i.useAngularEvents)?"YES":"NO",h.info("Config     ","Use Angular based events "+o)),e()})}).then(function(){return d&&(s=new Nanobar).go(1),h.debug("Information","Config loaded successfully"),h.debug("Information","Parameters set"),a(10),t()}).then(function(){return h.debug("Information","Finished reading application key"),a(20),h.debug("Loading    ","Preparing for loading pre-dependencies..."),i(f.libraries.prerequisites,!1,!0)}).then(function(){return h.debug("Information","Finished loading pre-dependencies"),a(30),function(){h.debug("Loading    ","Preparing for loading framework...");var e=f.libraries.sdk.default;return i(f.libraries.sdk[e],!0,!0)}()}).then(function(){return h.debug("Information","Finished loading framework"),a(45),h.debug("Loading    ","Preparing for loading post-dependencies..."),i(f.libraries.after,!0,!0)}).then(function(){return h.debug("Information","Finished loading post-dependencies"),a(60),h.debug("Loading    ","Preparing for loading application CSS..."),i(f.app.css,!0,!1)}).then(function(){return h.debug("Information","Finished loading application CSS"),a(75),h.debug("Loading    ","Preparing for loading application files..."),i(f.app.js,!1,!0)}).then(function(){return h.debug("Information","Finished loading application"),a(90),o()}).then(function(){return h.debug("Information","Finished bootstraping application"),a(95),r()}).then(function(){h.debug("Information","Finished initializing SDK"),h.info("Initialize ","---------------------------------------------"),a(100),e()}).catch(function(e){h.info("Initialize ","---------------------------------------------"),n(e)})})).then(function(){h.info("Initialize ","Loaded!"),window.rainbowSDK.load()}).catch(function(e){h.warning("Initialize ","Something goes wrong!!! Please have a look to the logs.");var n=e.message?e.message:"unknown error";n+=e.stack?" | stack: "+e.stack:"",h.warning("Initialize ",n)})}catch(e){console.log("If you see that... Just go away from that code :-)",e)}}();